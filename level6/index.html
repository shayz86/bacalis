<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Bacalis - Dunia Mainan Edition</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;600;700&display=swap" rel="stylesheet">

    <style>
        body { 
            font-family: 'Fredoka', sans-serif; 
            background-color: #3b82f6; /* Biru Mainan */
            color: #1e3a8a; 
            overscroll-behavior: none; 
            user-select: none; 
            -webkit-user-select: none; 
            overflow: hidden;
        }

        .toy-bg {
            background: linear-gradient(135deg, #60a5fa, #3b82f6, #2563eb);
            background-attachment: fixed;
        }

        /* Animasi Mainan Bergerak */
        .toy-element {
            position: absolute;
            pointer-events: none;
            z-index: 0;
            opacity: 0.3;
            animation: moveToys linear infinite;
        }

        @keyframes moveToys {
            from { transform: translate(-100px, 0) rotate(0deg); }
            to { transform: translate(110vw, 50px) rotate(360deg); }
        }

        /* Animasi Mengambang Balok */
        .float {
            animation: floating 4s ease-in-out infinite;
        }

        @keyframes floating {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(5deg); }
        }

        /* Gaya Tombol Balok (Lego Style) */
        .toy-btn {
            box-shadow: 0 6px 0 #1d4ed8, 0 10px 20px rgba(0,0,0,0.1);
            transition: all 0.1s;
            border: 3px solid rgba(0,0,0,0.05);
        }
        .toy-btn:active {
            transform: translateY(4px);
            box-shadow: 0 2px 0 #1d4ed8;
        }

        /* Kartu Panel Mainan */
        .toy-card {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(8px);
            border: 5px solid #fbbf24; /* Kuning Lego */
            border-radius: 40px;
            box-shadow: 0 15px 0 rgba(0,0,0,0.05);
        }

        .custom-scrollbar::-webkit-scrollbar { width: 8px; }
        .custom-scrollbar::-webkit-scrollbar-track { background: transparent; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: #fbbf24; border-radius: 10px; border: 2px solid #3b82f6; }
    </style>
</head>
<body class="toy-bg">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useMemo } = React;

        // --- KONFIGURASI SUARA ---
        const speak = (text, voiceIndex = 0) => {
            if ('speechSynthesis' in window) {
                window.speechSynthesis.cancel();
                const utterance = new SpeechSynthesisUtterance(text.toLowerCase());
                utterance.lang = 'id-ID';
                utterance.rate = 0.85;
                const voices = window.speechSynthesis.getVoices();
                const idVoices = voices.filter(v => v.lang.includes('id') || v.lang.includes('ID'));
                if (idVoices.length > 0) {
                    utterance.voice = idVoices[voiceIndex] || idVoices[0];
                }
                window.speechSynthesis.speak(utterance);
            }
        };

        // --- DATA PEMBELAJARAN (TETAP) ---
        const alphabetData = Array.from({ length: 26 }, (_, i) => ({
            char: String.fromCharCode(65 + i),
            isVowel: ['A', 'I', 'U', 'E', 'O'].includes(String.fromCharCode(65 + i))
        }));

        const vcGroups = [
            { id: 'b', labels: ['ab', 'ib', 'ub', 'eb', 'ob'], words: ['sebab', 'kitab', 'tabib', 'nasib', 'lembab', 'ajib'], sentences: ['bobi baca kitab', 'hari ini lembab', 'nasib baik rudi', 'tabib obat sakit'] },
            { id: 'd', labels: ['ad', 'id', 'ud', 'ed', 'od'], words: ['ahad', 'jasad', 'akad', 'adab', 'lidi', 'loda', 'edan', 'ludo', 'muda', 'sudu', 'judo', 'kodok'], sentences: ['hari ahad libur', 'adab anak baik', 'muda mudi lari', 'lidi sapu kaku'] },
            { id: 'f', labels: ['af', 'if', 'uf', 'ef', 'of'], words: ['hafal', 'aktif', 'huruf', 'efek', 'ofset', 'kafe'], sentences: ['toni hafal doa', 'aktif main bola', 'baca huruf abjad', 'efek cahaya lampu'] },
            { id: 'g', labels: ['ag', 'ig', 'ug', 'eg', 'og'], words: ['agak', 'tiga', 'rugi', 'tegu', 'moga', 'pagi'], sentences: ['hari pagi cerah', 'tiga roda mobil', 'moga lekas sembuh', 'agak lapar sekali'] },
            { id: 'h', labels: ['ah', 'ih', 'uh', 'eh', 'oh'], words: ['gajah', 'pilih', 'tujuh', 'oleh', 'tokoh', 'asuh'], sentences: ['gajah badan besar', 'pilih baju baru', 'tujuh hari libur', 'oleh oleh mama'] },
            { id: 'k', labels: ['ak', 'ik', 'uk', 'ek', 'ok'], words: ['anak', 'adik', 'pukuk', 'bebek', 'pokok', 'rusak'], sentences: ['anak kakek lucu', 'adik main boneka', 'bebek berenang air', 'pokok pohon sawo'] },
            { id: 'l', labels: ['al', 'il', 'ul', 'el', 'ol'], words: ['awal', 'sipil', 'pukul', 'apel', 'tolol', 'kail'], sentences: ['makan apel merah', 'pukul satu siang', 'awal mula lari', 'kail pancing baru'] },
            { id: 'm', labels: ['am', 'im', 'um', 'em', 'om'], words: ['asam', 'kirim', 'harum', 'adem', 'bom', 'diam'], sentences: ['buah asam jawa', 'bunga harum wangi', 'kirim surat papa', 'diam itu emas'] },
            { id: 'n', labels: ['an', 'in', 'un', 'en', 'on'], words: ['ikan', 'pindah', 'daun', 'panen', 'pohon', 'bensin'], sentences: ['ikan warna biru', 'daun jati jatuh', 'panen padi pagi', 'pohon sawo tinggi'] },
            { id: 'p', labels: ['ap', 'ip', 'up', 'ep', 'op'], words: ['atap', 'titip', 'tutup', 'cakep', 'stop', 'asap'], sentences: ['atap rumah bocor', 'tutup botol biru', 'titip pesan mama', 'asap api panas'] },
            { id: 'r', labels: ['ar', 'ir', 'ur', 'er', 'or'], words: ['akar', 'pasir', 'sayur', 'pergi', 'motor', 'bibir'], sentences: ['akar pohon kuat', 'pasir pantai putih', 'sayur bayam enak', 'naik motor bapak'] },
            { id: 's', labels: ['as', 'is', 'us', 'es', 'os'], words: ['atas', 'garis', 'tikus', 'oles', 'bos', 'haus'], sentences: ['naik ke atas', 'garis lurus satu', 'oles selai madu', 'minum es jeruk'] },
            { id: 't', labels: ['at', 'it', 'ut', 'et', 'ot'], words: ['obat', 'bukit', 'lutut', 'karet', 'otot', 'sakit'], sentences: ['minum obat pait', 'naik bukit tinggi', 'otot tangan kuat', 'karet gelang merah'] },
            { id: 'z', labels: ['az', 'iz', 'uz', 'ez', 'oz'], words: ['azan', 'aziz', 'uzur', 'ezra', 'ozon', 'zakat'], sentences: ['dengar suara azan', 'aziz anak rajin', 'lapisan ozon biru', 'zakat hari raya'] },
        ];

        const specialGroups = [
            { id: 'nga', labels: ['nga', 'ngi', 'ngu', 'nge', 'ngo'], words: ['bunga', 'pelangi', 'tunggu', 'ngeri', 'ngoceh'], sentences: ['bunga mawar merah', 'pelangi sangat indah', 'tunggu ibu pulang', 'adik suka ngoceh'] },
            { id: 'nya', labels: ['nya', 'nyi', 'nyu', 'nye', 'nyo'], words: ['nyanyi', 'bunyi', 'penyu', 'nyenyak', 'nyonya'], sentences: ['adik sedang nyanyi', 'suara bunyi bel', 'penyu berenang jauh', 'tidur sangat nyenyak'] },
            { id: 'ang', labels: ['ang', 'ing', 'ung', 'eng', 'ong'], words: ['pisang', 'piring', 'burung', 'kaleng', 'tolong'], sentences: ['makan pisang manis', 'piring warna biru', 'burung terbang tinggi', 'tolong ambil tas'] },
            { id: 'kra', labels: ['kra', 'kri', 'kru', 'kre', 'kro'], words: ['krakal', 'kristal', 'krupuk', 'kreasi', 'kronis'], sentences: ['kristal bening sekali', 'makan krupuk udang', 'kreasi anak rajin', 'penyakit sudah kronis'] },
            { id: 'pra', labels: ['pra', 'pri', 'pru', 'pre', 'pro'], words: ['prada', 'pria', 'pru', 'premi', 'promo'], sentences: ['pria itu tinggi', 'dapat harga promo', 'bayar premi buku', 'nama taman prada'] },
            { id: 'spa', labels: ['spa', 'spi', 'spu', 'spe', 'spo'], words: ['spasi', 'spion', 'spul', 'sepele', 'spon'], sentences: ['spasi satu kali', 'spion motor ayah', 'spon cuci piring', 'jangan anggap sepele'] },
            { id: 'sta', labels: ['sta', 'sti', 'stu', 'ste', 'sto'], words: ['stasiun', 'stiker', 'studi', 'stempel', 'stop'], sentences: ['kereta di stasiun', 'stiker mobil baru', 'stempel buku tulis', 'berhenti di stop'] },
            { id: 'tra', labels: ['tra', 'tri', 'tru', 'tre', 'tro'], words: ['traktir', 'trik', 'truk', 'tren', 'tropis'], sentences: ['ayah traktir makan', 'truk bawa pasir', 'hutan sangat tropis', 'belajar trik sulap'] },
            { id: 'swa', labels: ['swa', 'swi', 'swu', 'swe', 'swo'], words: ['swasta', 'swis', 'swadaya', 'swedia', 'swara'], sentences: ['bekerja di swasta', 'swara burung merdu', 'negara swedia jauh', 'cokelat dari swis'] },
            { id: 'ai', labels: ['ai', 'au', 'ae', 'ao'], words: ['pandai', 'pulau', 'aerob', 'kaos'], sentences: ['anak sangat pandai', 'pulau sangat luas', 'kaos warna biru', 'senam aerob pagi'] },
            { id: 'ia', labels: ['ia', 'iu', 'ie', 'io'], words: ['ceria', 'tiup', 'diet', 'radio'], sentences: ['adik riang ceria', 'tiup lilin kue', 'mendengar radio lama', 'diet buah sehat'] },
            { id: 'ua', labels: ['ua', 'ui', 'ue', 'uo'], words: ['suara', 'kuil', 'kueri', 'kuota'], sentences: ['suara ibu merdu', 'pergi ke kuil', 'beli kuota data', 'kueri data baru'] },
            { id: 'oa', labels: ['oa', 'oi', 'ou', 'oe'], words: ['loak', 'koboi', 'out', 'beo'], sentences: ['barang bekas loak', 'koboi naik kuda', 'bola sudah out', 'burung beo pintar'] },
        ];

        const rlData = {
            r: ['beludru', 'drama', 'pabrik', 'traktor', 'krupuk', 'proklamasi', 'prangko', 'trik', 'kripik'],
            l: ['taplak', 'celemek', 'suplai', 'oplas', 'iklan', 'klan', 'plakat', 'kloning', 'blaster']
        };

        const reflectionData = [
            { title: "Pagi yang Cerah", lines: ["Matahari pagi terbit cerah", "Ayah sedang baca koran", "Ibu masak nasi goreng", "Adik minum susu hangat", "Kami makan bersama riang", "Siap pergi ke sekolah"] },
            { title: "Main di Taman", lines: ["Sore hari main taman", "Aku naik sepeda biru", "Teman ajak main bola", "Angin sejuk sekali rasanya", "Banyak bunga sedang mekar", "Pulang rumah hati senang"] },
            { title: "Kebun Binatang", lines: ["Kami pergi lihat gajah", "Gajah punya belalai panjang", "Ada monyet makan pisang", "Burung warna warni terbang", "Jerapah leher sangat tinggi", "Pengalaman seru hari ini"] },
            { title: "Membantu Ibu", lines: ["Ibu sedang siram bunga", "Aku bantu sapu daun", "Halaman jadi bersih rapi", "Ibu senyum sangat manis", "Terima kasih anak baik", "Hati aku rasa bangga"] },
            { title: "Buku Cerita", lines: ["Aku baca buku baru", "Gambar naga sangat lucu", "Cerita petualangan yang seru", "Satu baris aku eja", "Lama lama jadi lancar", "Membaca itu jendela dunia"] }
        ];

        // --- KOMPONEN APLIKASI ---

        const App = () => {
            const [currentScreen, setCurrentScreen] = useState('menu');
            const [selectedData, setSelectedData] = useState(null);
            const [voiceIndex, setVoiceIndex] = useState(0);
            const [showSettings, setShowSettings] = useState(false);

            const navigate = (screen, data = null) => {
                setSelectedData(data);
                setCurrentScreen(screen);
            };

            const renderScreen = () => {
                switch (currentScreen) {
                    case 'menu': return <Menu onNav={navigate} onSettings={() => setShowSettings(true)} />;
                    case 'alphabet': return <AlphabetView onBack={() => navigate('menu')} voice={voiceIndex} isVowel={false} />;
                    case 'vowel': return <AlphabetView onBack={() => navigate('menu')} voice={voiceIndex} isVowel={true} />;
                    case 'syllableVC': return <ListView title="Suku Kata VC" groups={vcGroups} color="bg-red-500" onSelect={(d) => navigate('lesson', d)} onBack={() => navigate('menu')} />;
                    case 'special': return <ListView title="Suku Spesial" groups={specialGroups} color="bg-green-500" onSelect={(d) => navigate('lesson', d)} onBack={() => navigate('menu')} />;
                    case 'lesson': return <LessonView data={selectedData} voice={voiceIndex} onBack={() => navigate('menu')} />;
                    case 'rl': return <RLView data={rlData} voice={voiceIndex} onBack={() => navigate('menu')} />;
                    case 'reflection': return <ReflectionView data={reflectionData} voice={voiceIndex} onBack={() => navigate('menu')} />;
                    default: return <Menu onNav={navigate} />;
                }
            };

            return (
                <div className="h-screen w-full relative overflow-hidden">
                    <BackgroundDecoration />
                    {renderScreen()}
                    {showSettings && <SettingsModal active={voiceIndex} setVoice={setVoiceIndex} onClose={() => setShowSettings(false)} />}
                </div>
            );
        };

        const BackgroundDecoration = () => {
            const icons = ["fa-robot", "fa-car", "fa-plane", "fa-cube", "fa-rocket", "fa-truck-monster"];
            return (
                <div className="fixed inset-0 pointer-events-none z-0">
                    {icons.map((icon, i) => (
                        <div key={i} className="toy-element" style={{
                            top: `${15 * i}%`,
                            left: `-100px`,
                            animationDuration: `${20 + (i * 5)}s`,
                            animationDelay: `${i * 3}s`,
                            fontSize: `${30 + (i * 10)}px`
                        }}>
                            <i className={`fa-solid ${icon}`}></i>
                        </div>
                    ))}
                    {/* Balok Dekorasi */}
                    <div className="absolute top-20 right-10 text-6xl opacity-20 float text-yellow-300"><i className="fa-solid fa-cube"></i></div>
                    <div className="absolute bottom-20 left-10 text-6xl opacity-20 float text-red-400" style={{animationDelay: '1s'}}><i className="fa-solid fa-cube"></i></div>
                </div>
            );
        };

        const Menu = ({ onNav, onSettings }) => (
            <div className="flex flex-col items-center justify-start h-screen p-6 overflow-y-auto custom-scrollbar relative z-10">
                <button onClick={onSettings} className="absolute top-6 right-6 bg-yellow-400 p-4 rounded-2xl text-blue-800 shadow-lg active:scale-90 transition-transform z-20 border-b-4 border-yellow-600">
                    <i className="fa-solid fa-robot text-2xl"></i>
                </button>

                <header className="text-center mt-12 mb-10 float">
                    <h1 className="text-7xl font-black text-white drop-shadow-[0_8px_0_#1d4ed8] tracking-tighter">BACALIS</h1>
                    <div className="bg-white/20 px-6 py-1 rounded-full border-2 border-white/40 backdrop-blur-sm mt-2">
                        <span className="text-white font-bold uppercase text-xs tracking-widest">Dunia Mainan Edition</span>
                    </div>
                </header>

                <div className="grid grid-cols-1 sm:grid-cols-2 gap-6 w-full max-w-4xl pb-16">
                    <MenuCard icon="fa-font" title="ABJAD" sub="Stage 1-1" color="bg-yellow-400" text="text-blue-900" onClick={() => onNav('alphabet')} />
                    <MenuCard icon="fa-star" title="VOKAL" sub="Pit Stop" color="bg-red-500" text="text-white" onClick={() => onNav('vowel')} />
                    <MenuCard icon="fa-cubes" title="SUKU VC" sub="Balok Huruf" color="bg-blue-500" text="text-white" onClick={() => onNav('syllableVC')} />
                    <MenuCard icon="fa-puzzle-piece" title="SPESIAL" sub="Kombinasi Seru" color="bg-green-500" text="text-white" onClick={() => onNav('special')} />
                    <MenuCard icon="fa-truck-fast" title="BACA R & L" sub="Huruf Tengah" color="bg-orange-500" text="text-white" onClick={() => onNav('rl')} />
                    <MenuCard icon="fa-gamepad" title="REFLEKSI" sub="Misi Cerita" color="bg-purple-500" text="text-white" onClick={() => onNav('reflection')} />
                </div>
            </div>
        );

        const MenuCard = ({ icon, title, sub, color, text, onClick }) => (
            <button onClick={onClick} className={`${color} ${text} p-6 rounded-[30px] toy-btn flex items-center justify-between group border-2 border-black/10`}>
                <div className="text-left">
                    <h2 className="text-2xl font-black uppercase tracking-tight">{title}</h2>
                    <p className="opacity-70 text-[10px] font-bold tracking-widest">{sub}</p>
                </div>
                <div className="p-4 bg-white/20 rounded-2xl group-hover:rotate-12 transition-transform">
                    <i className={`fa-solid ${icon} text-3xl`}></i>
                </div>
            </button>
        );

        const AlphabetView = ({ onBack, voice, isVowel }) => {
            const data = isVowel ? alphabetData.filter(i => i.isVowel) : alphabetData;
            return (
                <div className="flex flex-col h-screen relative z-10">
                    <div className="p-4 bg-yellow-400 text-blue-900 flex items-center justify-between border-b-4 border-yellow-600">
                        <button onClick={onBack} className="w-12 h-12 bg-white/40 rounded-2xl flex items-center justify-center border-b-4 border-black/10 active:scale-90"><i className="fa-solid fa-chevron-left"></i></button>
                        <h2 className="font-bold uppercase tracking-widest">{isVowel ? "Vokal Mainan" : "Abjad Balok"}</h2>
                        <div className="w-12"></div>
                    </div>
                    <div className="flex-1 overflow-y-auto p-4 flex flex-wrap justify-center gap-4 content-start custom-scrollbar">
                        {data.map(item => (
                            <button key={item.char} onClick={() => speak(item.char, voice)} 
                                className={`${isVowel ? 'w-36 h-36 text-7xl' : 'w-24 h-24 text-5xl'} rounded-[20px] flex items-center justify-center font-black shadow-lg border-b-8 active:scale-90 transition-transform ${item.isVowel ? 'bg-red-500 text-white border-red-700' : 'bg-white text-blue-600 border-gray-200'}`}>
                                {item.char}
                            </button>
                        ))}
                        <div className="w-full h-10"></div>
                    </div>
                </div>
            );
        };

        const ListView = ({ title, groups, color, onSelect, onBack }) => (
            <div className="flex flex-col h-screen relative z-10">
                <div className={`p-4 ${color} text-white flex items-center justify-between border-b-4 border-black/20`}>
                    <button onClick={onBack} className="w-12 h-12 bg-white/20 rounded-2xl flex items-center justify-center active:scale-90"><i className="fa-solid fa-chevron-left"></i></button>
                    <h2 className="font-bold uppercase tracking-widest">{title}</h2>
                    <div className="w-12"></div>
                </div>
                <div className="flex-1 overflow-y-auto p-4 space-y-4 max-w-xl mx-auto w-full custom-scrollbar content-start">
                    {groups.map(g => (
                        <button key={g.id} onClick={() => onSelect(g)} className="w-full bg-white p-6 rounded-[30px] shadow-md flex items-center justify-between border-b-8 border-black/5 active:scale-95 transition-transform hover:bg-blue-50">
                            <div className="flex gap-2 font-black text-2xl text-blue-600 uppercase">
                                {g.labels.slice(0, 3).map(l => <span key={l} className="bg-yellow-100 px-2 rounded-lg">{l}</span>)}
                                <span className="opacity-20 self-end">...</span>
                            </div>
                            <div className="bg-blue-100 w-12 h-12 rounded-2xl flex items-center justify-center text-blue-500 border-b-4 border-blue-200">
                                <i className="fa-solid fa-play"></i>
                            </div>
                        </button>
                    ))}
                    <div className="w-full h-10"></div>
                </div>
            </div>
        );

        const LessonView = ({ data, voice, onBack }) => (
            <div className="flex flex-col h-screen relative z-10">
                <div className="p-4 bg-blue-600 text-white flex items-center justify-between border-b-4 border-blue-800">
                    <button onClick={onBack} className="w-12 h-12 bg-white/20 rounded-2xl flex items-center justify-center active:scale-90"><i className="fa-solid fa-chevron-left"></i></button>
                    <h2 className="font-bold uppercase tracking-tight">Misi: {data.id.toUpperCase()}</h2>
                    <div className="w-12"></div>
                </div>
                <div className="flex-1 overflow-y-auto p-6 space-y-10 custom-scrollbar pb-20">
                    <div className="toy-card p-8 text-center">
                        <p className="text-blue-400 font-bold text-xs uppercase mb-6 tracking-widest">Balok Huruf</p>
                        <div className="flex flex-wrap gap-4 justify-center">
                            {data.labels.map(l => (
                                <button key={l} onClick={() => speak(l, voice)} className="bg-yellow-400 text-blue-900 w-20 h-20 rounded-2xl flex items-center justify-center text-3xl font-black toy-btn border-2 border-yellow-600">{l}</button>
                            ))}
                        </div>
                    </div>
                    <div>
                        <h3 className="text-white font-bold mb-4 flex items-center gap-2"><i className="fa-solid fa-robot text-yellow-400"></i> BACA KATA</h3>
                        <div className="grid grid-cols-2 sm:grid-cols-3 gap-4">
                            {data.words.map(w => (
                                <button key={w} onClick={() => speak(w, voice)} className="bg-white p-5 rounded-2xl shadow-lg font-bold text-blue-600 border-b-4 border-gray-200 active:scale-95">{w}</button>
                            ))}
                        </div>
                    </div>
                    <div>
                        <h3 className="text-white font-bold mb-4 flex items-center gap-2"><i className="fa-solid fa-car text-red-400"></i> BACA KALIMAT</h3>
                        <div className="bg-white rounded-[40px] p-8 space-y-4 shadow-xl border-b-8 border-black/5">
                            {data.sentences.map((s, i) => (
                                <button key={i} onClick={() => speak(s, voice)} className="w-full text-left text-2xl font-medium text-blue-900 border-b-2 border-blue-50 pb-3 flex items-start gap-4 hover:bg-yellow-50 rounded-xl px-2 transition-colors">
                                    <span className="text-blue-300"><i className="fa-solid fa-rocket"></i></span> {s}
                                </button>
                            ))}
                        </div>
                    </div>
                    <div className="w-full h-10"></div>
                </div>
            </div>
        );

        const RLView = ({ data, voice, onBack }) => {
            const [type, setType] = useState('r');
            return (
                <div className="flex flex-col h-screen relative z-10">
                    <div className="p-4 bg-orange-500 text-white flex items-center justify-between border-b-4 border-orange-700">
                        <button onClick={onBack} className="w-12 h-12 bg-white/20 rounded-2xl flex items-center justify-center active:scale-90"><i className="fa-solid fa-chevron-left"></i></button>
                        <h2 className="font-bold uppercase tracking-widest">Truk Huruf R & L</h2>
                        <div className="w-12"></div>
                    </div>
                    <div className="p-6 flex gap-6 justify-center">
                        <button onClick={() => setType('r')} className={`px-12 py-4 rounded-3xl font-black text-2xl border-b-8 transition-all active:translate-y-2 ${type === 'r' ? 'bg-white text-orange-600 border-orange-200' : 'bg-orange-600 text-white border-orange-800'}`}>R</button>
                        <button onClick={() => setType('l')} className={`px-12 py-4 rounded-3xl font-black text-2xl border-b-8 transition-all active:translate-y-2 ${type === 'l' ? 'bg-white text-orange-600 border-orange-200' : 'bg-orange-600 text-white border-orange-800'}`}>L</button>
                    </div>
                    <div className="flex-1 p-4 overflow-y-auto flex justify-center items-start">
                        <div className="grid grid-cols-3 gap-6 w-full max-w-md pb-10">
                            {data[type].map(w => (
                                <button key={w} onClick={() => speak(w, voice)} className="aspect-square bg-white rounded-[30px] shadow-xl flex items-center justify-center font-bold text-orange-600 text-center px-2 border-b-8 border-gray-100 active:scale-90 transition-transform text-xl">
                                    {w}
                                </button>
                            ))}
                        </div>
                    </div>
                </div>
            );
        };

        const ReflectionView = ({ data, voice, onBack }) => {
            const [selected, setSelected] = useState(null);
            if (selected) {
                return (
                    <div className="flex flex-col h-screen relative z-10">
                        <div className="p-4 bg-purple-600 text-white flex items-center justify-between border-b-4 border-purple-800">
                            <button onClick={() => setSelected(null)} className="w-12 h-12 bg-white/20 rounded-2xl flex items-center justify-center active:scale-90"><i className="fa-solid fa-chevron-left"></i></button>
                            <h2 className="font-bold uppercase tracking-tight">{selected.title}</h2>
                            <div className="w-12"></div>
                        </div>
                        <div className="flex-1 p-6 flex flex-col justify-center items-center overflow-y-auto custom-scrollbar">
                            <div className="toy-card p-10 space-y-6 w-full max-w-2xl">
                                {selected.lines.map((l, i) => (
                                    <button key={i} onClick={() => speak(l, voice)} className="w-full text-center text-2xl font-bold text-purple-900 border-b-2 border-purple-50 pb-3 hover:text-purple-500 transition-colors">
                                        {l}
                                    </button>
                                ))}
                            </div>
                            <button onClick={() => setSelected(null)} className="mt-10 bg-purple-500 text-white px-16 py-5 rounded-full toy-btn font-black uppercase text-xl border-2 border-purple-700">MISI SELESAI</button>
                        </div>
                    </div>
                );
            }
            return (
                <div className="flex flex-col h-screen relative z-10">
                    <div className="p-4 bg-purple-600 text-white flex items-center justify-between border-b-4 border-purple-800">
                        <button onClick={onBack} className="w-12 h-12 bg-white/20 rounded-2xl flex items-center justify-center active:scale-90"><i className="fa-solid fa-chevron-left"></i></button>
                        <h2 className="font-bold uppercase tracking-widest">Level Misi Cerita</h2>
                        <div className="w-12"></div>
                    </div>
                    <div className="flex-1 p-4 overflow-y-auto space-y-4 max-w-xl mx-auto w-full custom-scrollbar content-start">
                        {data.map(r => (
                            <button key={r.title} onClick={() => setSelected(r)} className="w-full bg-white p-6 rounded-[35px] shadow-lg flex items-center justify-between border-b-8 border-purple-100 active:scale-95 transition-transform group">
                                <span className="text-xl font-bold text-purple-600 uppercase tracking-tight">{r.title}</span>
                                <div className="bg-purple-100 p-4 rounded-2xl text-purple-400 group-hover:rotate-12 transition-transform shadow-inner">
                                    <i className="fa-solid fa-gamepad"></i>
                                </div>
                            </button>
                        ))}
                        <div className="w-full h-10"></div>
                    </div>
                </div>
            );
        };

        const SettingsModal = ({ active, setVoice, onClose }) => (
            <div className="fixed inset-0 z-[100] flex items-center justify-center p-6 bg-blue-900/60 backdrop-blur-md">
                <div className="bg-white rounded-[50px] p-8 w-full max-w-md shadow-2xl border-t-8 border-yellow-400 animate-pop">
                    <div className="flex justify-between items-center mb-10">
                        <h3 className="text-2xl font-black text-blue-600 uppercase tracking-tight">Pilih Teman Belajar</h3>
                        <button onClick={onClose} className="text-gray-300 hover:text-red-500 transition-colors"><i className="fa-solid fa-circle-xmark text-4xl"></i></button>
                    </div>
                    <div className="grid grid-cols-2 gap-6">
                        {[
                            { name: 'Si Robot', icon: 'ðŸ¤–' },
                            { name: 'Si Beruang', icon: 'ðŸ§¸' },
                            { name: 'Si Mobil', icon: 'ðŸš—' },
                            { name: 'Si Roket', icon: 'ðŸš€' }
                        ].map((char, i) => (
                            <button key={i} onClick={() => { setVoice(i); speak("Ayo main!", i); }} className={`p-6 rounded-[40px] flex flex-col items-center gap-2 border-4 transition-all ${active === i ? 'border-blue-500 bg-blue-50 scale-105 shadow-xl' : 'border-gray-100 bg-white'}`}>
                                <span className="text-5xl">{char.icon}</span>
                                <span className="font-bold text-xs uppercase text-blue-600 tracking-wider">{char.name}</span>
                            </button>
                        ))}
                    </div>
                    <button onClick={onClose} className="w-full mt-10 bg-green-500 text-white font-black py-5 rounded-full toy-btn uppercase tracking-widest text-lg border-2 border-green-700">SIAP BERMAIN!</button>
                </div>
            </div>
        );

        ReactDOM.createRoot(document.getElementById('root')).render(<App />);
    </script>
</body>
</html>

